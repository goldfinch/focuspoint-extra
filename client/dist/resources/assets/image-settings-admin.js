(function(d){d.entwine("ss",t=>{t("body").append(t('<div id="AltEditorCharCounter"></div>').hide()),t(".image-settings fieldset.grid .ss-gridfield-item input, .image-settings fieldset.grid .ss-gridfield-item textarea").entwine({onkeydown(e){(e.which&&e.which==13||e.keyCode&&e.keyCode==13)&&(e.preventDefault(),t(this).trigger("change"))},onkeyup(){t("#AltEditorCharCounter").html(t(this).val().trim().length)},onfocusin(){t(".cms-edit-form").removeClass("changed"),t("#AltEditorCharCounter").show(),t("#AltEditorCharCounter").html(t(this).val().trim().length)},onfocusout(){t("#AltEditorCharCounter").hide()},onchange(){t(".cms-edit-form").removeClass("changed");const e=t(this),r=e.closest("tr").attr("data-id"),o=`${e.closest(".ss-gridfield").attr("data-url")}/update/${r}`;let a=`${encodeURIComponent(e.attr("name"))}=${encodeURIComponent(t(this).val())}`;e.closest("td").addClass("saving"),a=a.replace("%5BGridFieldEditableColumns%5D",""),t.ajax({type:"POST",url:o,data:a,success(s,i){e.closest("td").attr("class",""),s.errors.length?(e.closest("td").addClass("has-warning"),s.errors.forEach(l=>{e.closest("td").addClass(l)})):e.closest("td").addClass("has-success"),t(".cms-edit-form").removeClass("changed")},error(s,i){e.closest("td").attr("class",""),e.closest("td").addClass("error"),alert(s.responseText)},dataType:"json"})}})})})(jQuery);
