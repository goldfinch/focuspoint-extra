(function(d){d.entwine("ss",s=>{s(".image-editor fieldset.grid .ss-gridfield-item input, .image-editor fieldset.grid .ss-gridfield-item textarea").entwine({onkeydown(e){(e.which&&e.which==13||e.keyCode&&e.keyCode==13)&&(e.preventDefault(),s(this).trigger("change"))},onkeyup(){},onfocusin(){s(".cms-edit-form").removeClass("changed")},onfocusout(){},onchange(){s(".cms-edit-form").removeClass("changed");const e=s(this),o=e.closest("tr").attr("data-id"),r=`${e.closest(".ss-gridfield").attr("data-url")}/update/${o}`;let a=`${encodeURIComponent(e.attr("name"))}=${encodeURIComponent(s(this).val())}`;e.closest("td").addClass("saving"),a=a.replace("%5BGridFieldEditableColumns%5D",""),s.ajax({type:"POST",url:r,data:a,success(t,i){e.closest("td").attr("class",""),t.errors.length?(e.closest("td").addClass("has-warning"),t.errors.forEach(n=>{e.closest("td").addClass(n)})):e.closest("td").addClass("has-success"),s(".cms-edit-form").removeClass("changed")},error(t,i){e.closest("td").attr("class",""),e.closest("td").addClass("error"),alert(t.responseText)},dataType:"json"})}})})})(jQuery);
